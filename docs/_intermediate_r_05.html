<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistical Inference For Data Science - 10&nbsp; Utilities</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data_visualization.html" rel="next">
<link href="./_intermediate_r_04.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Utilities</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistical Inference For Data Science</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./background_00.html" class="sidebar-item-text sidebar-link">R fundamentals in programming, data managment and visualization</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_fundamentals_for_data_science.html" class="sidebar-item-text sidebar-link">Nuts and bolts: Data types</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_introduction_to_r_01.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_introduction_to_r_02.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_introduction_to_r_03.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Matrices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_introduction_to_r_04.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Factors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_introduction_to_r_05.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_introduction_to_r_06.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lists</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./background_01.html" class="sidebar-item-text sidebar-link">R fundamentals in programming, data managment and visualization</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_intermediate_r_01.html" class="sidebar-item-text sidebar-link">Relational and logical operators, and conditional statements</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_intermediate_r_02.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_intermediate_r_03.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_intermediate_r_04.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The apply family</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_intermediate_r_05.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Utilities</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_visualization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data visualization with ggplot2 and friends</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./statistical-inference-whole-game.html" class="sidebar-item-text sidebar-link">The whole game of statistical Inference</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statistical_inference.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Statistical Inference with resampling: Bootstrap and Jacknife.</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear_regression.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lienar Regression</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#mathematical-utilities" id="toc-mathematical-utilities" class="nav-link active" data-scroll-target="#mathematical-utilities"><span class="toc-section-number">10.1</span>  Mathematical utilities</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp" id="toc-instructions-100-xp" class="nav-link" data-scroll-target="#instructions-100-xp">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#find-the-error" id="toc-find-the-error" class="nav-link" data-scroll-target="#find-the-error"><span class="toc-section-number">10.2</span>  Find the error</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-1" id="toc-instructions-100-xp-1" class="nav-link" data-scroll-target="#instructions-100-xp-1">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#data-utilities" id="toc-data-utilities" class="nav-link" data-scroll-target="#data-utilities"><span class="toc-section-number">10.3</span>  Data Utilities</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-2" id="toc-instructions-100-xp-2" class="nav-link" data-scroll-target="#instructions-100-xp-2">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#find-the-error-2" id="toc-find-the-error-2" class="nav-link" data-scroll-target="#find-the-error-2"><span class="toc-section-number">10.4</span>  Find the error (2)</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-3" id="toc-instructions-100-xp-3" class="nav-link" data-scroll-target="#instructions-100-xp-3">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#beat-gauss-using-r" id="toc-beat-gauss-using-r" class="nav-link" data-scroll-target="#beat-gauss-using-r"><span class="toc-section-number">10.5</span>  Beat Gauss using R</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-4" id="toc-instructions-100-xp-4" class="nav-link" data-scroll-target="#instructions-100-xp-4">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#grepl-grep" id="toc-grepl-grep" class="nav-link" data-scroll-target="#grepl-grep"><span class="toc-section-number">10.6</span>  grepl &amp; grep</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-5" id="toc-instructions-100-xp-5" class="nav-link" data-scroll-target="#instructions-100-xp-5">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#grepl-grep-2" id="toc-grepl-grep-2" class="nav-link" data-scroll-target="#grepl-grep-2"><span class="toc-section-number">10.7</span>  grepl &amp; grep (2)</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-6" id="toc-instructions-100-xp-6" class="nav-link" data-scroll-target="#instructions-100-xp-6">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#sub-gsub" id="toc-sub-gsub" class="nav-link" data-scroll-target="#sub-gsub"><span class="toc-section-number">10.8</span>  sub &amp; gsub</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-7" id="toc-instructions-100-xp-7" class="nav-link" data-scroll-target="#instructions-100-xp-7">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#sub-gsub-2" id="toc-sub-gsub-2" class="nav-link" data-scroll-target="#sub-gsub-2"><span class="toc-section-number">10.9</span>  sub &amp; gsub (2)</a>
  <ul class="collapse">
  <li><a href="#instructions-50-xp" id="toc-instructions-50-xp" class="nav-link" data-scroll-target="#instructions-50-xp">Instructions <code>50 XP</code></a></li>
  </ul></li>
  <li><a href="#right-here-right-now" id="toc-right-here-right-now" class="nav-link" data-scroll-target="#right-here-right-now"><span class="toc-section-number">10.10</span>  Right here, right now</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-8" id="toc-instructions-100-xp-8" class="nav-link" data-scroll-target="#instructions-100-xp-8">Instructions 100 XP</a></li>
  </ul></li>
  <li><a href="#create-and-format-dates" id="toc-create-and-format-dates" class="nav-link" data-scroll-target="#create-and-format-dates"><span class="toc-section-number">10.11</span>  Create and format dates</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-9" id="toc-instructions-100-xp-9" class="nav-link" data-scroll-target="#instructions-100-xp-9">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#create-and-format-times" id="toc-create-and-format-times" class="nav-link" data-scroll-target="#create-and-format-times"><span class="toc-section-number">10.12</span>  Create and format times</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-10" id="toc-instructions-100-xp-10" class="nav-link" data-scroll-target="#instructions-100-xp-10"><span class="toc-section-number">10.12.1</span>  Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#calculations-with-dates" id="toc-calculations-with-dates" class="nav-link" data-scroll-target="#calculations-with-dates"><span class="toc-section-number">10.13</span>  Calculations with Dates</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-11" id="toc-instructions-100-xp-11" class="nav-link" data-scroll-target="#instructions-100-xp-11">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#calculations-with-times" id="toc-calculations-with-times" class="nav-link" data-scroll-target="#calculations-with-times"><span class="toc-section-number">10.14</span>  Calculations with Times</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-12" id="toc-instructions-100-xp-12" class="nav-link" data-scroll-target="#instructions-100-xp-12">Instructions <code>100 XP</code></a></li>
  </ul></li>
  <li><a href="#time-is-of-the-essence" id="toc-time-is-of-the-essence" class="nav-link" data-scroll-target="#time-is-of-the-essence"><span class="toc-section-number">10.15</span>  Time is of the essence</a>
  <ul class="collapse">
  <li><a href="#instructions-100-xp-13" id="toc-instructions-100-xp-13" class="nav-link" data-scroll-target="#instructions-100-xp-13">Instructions <code>100 XP</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Utilities</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Mastering R programming is not only about understanding its programming concepts. Having a solid understanding of a wide range of R functions is also important. This chapter introduces you to many useful functions for data structure manipulation, regular expressions, and working with times and dates.</p>
<section id="mathematical-utilities" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="mathematical-utilities"><span class="header-section-number">10.1</span> Mathematical utilities</h2>
<p>Have another look at some useful math functions that R features:</p>
<ul>
<li><code>abs()</code>: Calculate the absolute value.</li>
<li><code>sum()</code>: Calculate the sum of all the values in a data structure.</li>
<li><code>mean()</code>: Calculate the arithmetic mean.</li>
<li><code>round()</code>: Round the values to 0 decimal places by default. Try out ?round in the console for variations of <code>round()</code> and ways to change the number of digits to round to.</li>
</ul>
<p>As a data scientist in training, you’ve estimated a regression model on the sales data for the past six months. After evaluating your model, you see that the training error of your model is quite regular, showing both positive and negative values. A vector <code>errors</code> containing the error values has been pre-defined for you.</p>
<section id="instructions-100-xp" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp">Instructions <code>100 XP</code></h3>
<p>Calculate the sum of the absolute rounded values of the training errors. You can work in parts, or with a single one-liner. There’s no need to store the result in a variable, just have R print it.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_043.R</strong></pre>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The errors vector has already been defined for you</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>errors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.9</span>, <span class="sc">-</span><span class="fl">2.6</span>, <span class="fl">4.0</span>, <span class="sc">-</span><span class="fl">9.5</span>, <span class="sc">-</span><span class="fl">3.4</span>, <span class="fl">7.3</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sum of absolute rounded values of errors</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">abs</span>(<span class="fu">round</span>(errors)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="find-the-error" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="find-the-error"><span class="header-section-number">10.2</span> Find the error</h2>
<p>We went ahead and pre-loaded some code for you, but there’s still an error. Can you trace it and fix it?</p>
<p>In times of despair, help with functions such as sum() and rev() are a single command away; simply execute the code ?sum and ?rev.</p>
<section id="instructions-100-xp-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-1">Instructions <code>100 XP</code></h3>
<p>Fix the error by including code on the last line. Remember: you want to call <code>mean()</code> only once!</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_044.R</strong></pre>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't edit these two lines</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>vec1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">8.4</span>, <span class="fl">3.7</span>, <span class="fl">6.3</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>vec2 <span class="ot">&lt;-</span> <span class="fu">rev</span>(vec1)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix the error</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">abs</span>(vec1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="data-utilities" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="data-utilities"><span class="header-section-number">10.3</span> Data Utilities</h2>
<p>R features a bunch of functions to juggle around with data structures::</p>
<ul>
<li>seq(): Generate sequences, by specifying the from, to, and by arguments.</li>
<li>rep(): Replicate elements of vectors and lists.</li>
<li>sort(): Sort a vector in ascending order. Works on numerics, but also on character strings and logicals.</li>
<li>rev(): Reverse the elements in a data structures for which reversal is defined.</li>
<li>str(): Display the structure of any R object.</li>
<li>append(): Merge vectors or lists.</li>
<li>is.*(): Check for the class of an R object.</li>
<li>as.*(): Convert an R object from one class to another.</li>
<li>unlist(): Flatten (possibly embedded) lists to produce a vector.</li>
</ul>
<p>Remember the social media profile views data? Your LinkedIn and Facebook view counts for the last seven days have been pre-defined as lists.</p>
<section id="instructions-100-xp-2" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-2">Instructions <code>100 XP</code></h3>
<ul>
<li>Convert both linkedin and facebook lists to a vector, and store them as <code>li_vec</code> and fb_vec respectively.</li>
<li>Next, append fb_vec to the li_vec (Facebook data comes last). Save the result as social_vec.</li>
<li>Finally, sort social_vec from high to low. Print the resulting vector.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_045.R</strong></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The linkedin and facebook lists have already been created for you</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>linkedin <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">16</span>, <span class="dv">9</span>, <span class="dv">13</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">17</span>, <span class="dv">14</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>facebook <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">17</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">16</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">14</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert linkedin and facebook to a vector: li_vec and fb_vec</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>li_vec <span class="ot">&lt;-</span> <span class="fu">unlist</span>(linkedin)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>fb_vec <span class="ot">&lt;-</span> <span class="fu">unlist</span>(facebook)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Append fb_vec to li_vec: social_vec</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>social_vec <span class="ot">&lt;-</span> <span class="fu">append</span>(li_vec, fb_vec)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort social_vec</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sort</span>(social_vec, <span class="at">decreasing=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="find-the-error-2" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="find-the-error-2"><span class="header-section-number">10.4</span> Find the error (2)</h2>
<p>Just as before, let’s switch roles. It’s up to you to see what unforgivable mistakes we’ve made. Go fix them!</p>
<section id="instructions-100-xp-3" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-3">Instructions <code>100 XP</code></h3>
<p>Correct the expression. Make sure that your fix still uses the functions <code>rep()</code> and <code>seq()</code>.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_046.R</strong></pre>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix me</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="at">by =</span> <span class="dv">2</span>), <span class="at">times =</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="beat-gauss-using-r" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="beat-gauss-using-r"><span class="header-section-number">10.5</span> Beat Gauss using R</h2>
<p>There is a popular story about young Gauss. As a pupil, he had a lazy teacher who wanted to keep the classroom busy by having them add up the numbers 1 to 100. Gauss came up with an answer almost instantaneously, 5050. On the spot, he had developed a formula for calculating the sum of an arithmetic series. There are more general formulas for calculating the sum of an arithmetic series with different starting values and increments. Instead of deriving such a formula, why not use R to calculate the sum of a sequence?</p>
<section id="instructions-100-xp-4" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-4">Instructions <code>100 XP</code></h3>
<ul>
<li>Using the function <code>seq()</code>, create a sequence that ranges from 1 to 500 in increments of 3. Assign the resulting vector to a variable <code>seq1</code>.</li>
<li>Again with the function <code>seq()</code>, create a sequence that ranges from 1200 to 900 in increments of -7. Assign it to a variable <code>seq2</code>.</li>
<li>Calculate the total sum of the sequences, either by using the <code>sum()</code> function twice and adding the two results, or by first concatenating the sequences and then using the <code>sum()</code> function once. Print the result to the console.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_047.R</strong></pre>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create first sequence: seq1</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>seq1 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">500</span>, <span class="at">by =</span> <span class="dv">3</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create second sequence: seq2</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>seq2 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1200</span>, <span class="dv">900</span>, <span class="at">by =</span> <span class="sc">-</span><span class="dv">7</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total sum of the sequences</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sum</span>(seq1) <span class="sc">+</span> <span class="fu">sum</span>(seq2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="grepl-grep" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="grepl-grep"><span class="header-section-number">10.6</span> grepl &amp; grep</h2>
<p>In their most basic form, regular expressions can be used to see whether a pattern exists inside a character string or a vector of character strings. For this purpose, you can use:</p>
<p><code>grepl()</code>, which returns <code>TRUE</code> when a pattern is found in the corresponding character string. <code>grep()</code>, which returns a vector of indices of the character strings that contains the pattern. Both functions need a pattern and an <code>x</code> argument, where pattern is the regular expression you want to match for, and the <code>x</code> argument is the character vector from which matches should be sought.</p>
<p>In this and the following exercises, you’ll be querying and manipulating a character vector of email addresses! The vector emails has been pre-defined so you can begin with the instructions straight away!</p>
<section id="instructions-100-xp-5" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-5">Instructions <code>100 XP</code></h3>
<ul>
<li>Use <code>grepl()</code> to generate a vector of logicals that indicates whether these email addresses contain <code>"edu"</code>. Print the result to the output.</li>
<li>Do the same thing with <code>grep()</code>, but this time save the resulting indexes in a variable hits.</li>
<li>Use the variable hits to select from the emails vector only the emails that contain <code>"edu"</code>.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_48.R</strong></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The emails vector has already been defined for you</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>emails <span class="ot">&lt;-</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"john.doe@ivyleague.edu"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"education@world.gov"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"dalai.lama@peace.org"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"invalid.edu"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"quant@bigdatacollege.edu"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cookie.monster@sesame.tv"</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Use grepl() to match for "edu"</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grepl</span>(<span class="st">'edu'</span>, emails))</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Use grep() to match for "edu", save result to hits</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>hits <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">'edu'</span>, emails)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset emails using hits</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>emails[hits]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="grepl-grep-2" class="level2" data-number="10.7">
<h2 data-number="10.7" class="anchored" data-anchor-id="grepl-grep-2"><span class="header-section-number">10.7</span> grepl &amp; grep (2)</h2>
<p>You can use the caret, ^, and the dollar sign, $ to match the content located in the start and end of a string, respectively. This could take us one step closer to a correct pattern for matching only the “.edu” email addresses from our list of emails. But there’s more that can be added to make the pattern more robust:</p>
<ul>
<li>@, because a valid email must contain an at-sign.</li>
<li>.* , which matches any character (.) zero or more times (*). Both the dot and the asterisk are metacharacters. You can use them to match any character between the at-sign and the “.edu” portion of an email address.</li>
<li><code>\\.edu$</code>, to match the “.edu” part of the email at the end of the string. The <code>\\</code> part escapes the dot: it tells R that you want to use the <code>.</code> as an actual character.</li>
</ul>
<section id="instructions-100-xp-6" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-6">Instructions <code>100 XP</code></h3>
<ul>
<li>Use <code>grepl()</code> with the more advanced regular expression to return a logical vector. Simply print the result.</li>
<li>Do a similar thing with <code>grep()</code> to create a vector of indices. Store the result in the variable <code>hits</code>.</li>
<li>Use <code>emails[hits]</code> again to subset the <code>emails</code> vector.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_049.R</strong></pre>
</div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The emails vector has already been defined for you</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>emails <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"john.doe@ivyleague.edu"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"education@world.gov"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dalai.lama@peace.org"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"invalid.edu"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"quant@bigdatacollege.edu"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cookie.monster@sesame.tv"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"@.*</span><span class="sc">\\</span><span class="st">.edu$"</span>, emails)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>hits <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"@.*</span><span class="sc">\\</span><span class="st">.edu$"</span>, emails)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>emails[hits]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sub-gsub" class="level2" data-number="10.8">
<h2 data-number="10.8" class="anchored" data-anchor-id="sub-gsub"><span class="header-section-number">10.8</span> sub &amp; gsub</h2>
<p>While grep() and grepl() were used to simply check whether a regular expression could be matched with a character vector, <code>sub()</code> and <code>gsub()</code> take it one step further: you can specify a replacement argument. If inside the character vector <code>x</code>, the regular expression pattern is found, the matching element(s) will be replaced with replacement. <code>sub()</code> only replaces the first match, whereas <code>gsub()</code> replaces all matches.</p>
<p>Suppose that emails vector you’ve been working with is an excerpt of DataCamp’s email database. Why not offer the owners of the <code>.edu</code> email addresses a new email address on the <code>datacamp.edu</code> domain? This could be quite a powerful marketing stunt: Online education is taking over traditional learning institutions! Convert your email and be a part of the new generation!</p>
<section id="instructions-100-xp-7" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-7">Instructions <code>100 XP</code></h3>
<p>With the advanced regular expression <code>"@.*\\.edu$"</code>, use <code>sub()</code> to replace the match with <code>"@datacamp.edu"</code>. Since there will only be one match per character string, <code>gsub()</code> is not necessary here. Inspect the resulting output.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_050.R</strong></pre>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The emails vector has already been defined for you</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>emails <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"john.doe@ivyleague.edu"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"education@world.gov"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"global@peace.org"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"invalid.edu"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"quant@bigdatacollege.edu"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cookie.monster@sesame.tv"</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Use sub() to convert the email domains to datacamp.edu</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"@.*</span><span class="sc">\\</span><span class="st">.edu$"</span>, <span class="st">"@datacamp.edu"</span>, emails)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sub-gsub-2" class="level2" data-number="10.9">
<h2 data-number="10.9" class="anchored" data-anchor-id="sub-gsub-2"><span class="header-section-number">10.9</span> sub &amp; gsub (2)</h2>
<p>Regular expressions are a typical concept that you’ll learn by doing and by seeing other examples. Before you rack your brains over the regular expression in this exercise, have a look at the new things that will be used:</p>
<ul>
<li>.*: A usual suspect! It can be read as “any character that is matched zero or more times”.</li>
<li>\s: Match a space. The “s” is normally a character, escaping it (\) makes it a metacharacter.</li>
<li>[0-9]+: Match the numbers 0 to 9, at least once (+).</li>
<li>([0-9]+): The parentheses are used to make parts of the matching string available to define the replacement. The \1 in the replacement argument of <code>sub()</code> gets set to the string that is captured by the regular expression [0-9]+. <code>{. r code-line-numbers="false"} awards &lt;- c(     "Won 1 Oscar.",     "Won 1 Oscar. Another 9 wins &amp; 24 nominations.",     "1 win and 2 nominations.",     "2 wins &amp; 3 nominations.",     "Nominated for 2 Golden Globes. 1 more win &amp; 2 nominations.",     "4 wins &amp; 1 nomination." ) sub(".*\\s([0-9]+)\\snomination.*$", "\\1", awards)</code> What does this code chunk return? awards is already defined in the workspace so you can start playing in the console straight away.</li>
</ul>
<section id="instructions-50-xp" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-50-xp">Instructions <code>50 XP</code></h3>
<p>Possible Answers</p>
<ul>
<li>A vector of integers containing: <code>1, 24, 2, 3, 2, 1</code>.</li>
<li>The vector awards gets returned as there isn’t a single element in awards that matches the regular expression.</li>
<li>A vector of character strings containing <code>"1", "24", "2", "3", "2", "1".</code></li>
<li>A vector of character strings containing <code>"Won 1 Oscar.",</code> <code>"24", "2", "3", "2", "1"</code>.</li>
</ul>
</section>
</section>
<section id="right-here-right-now" class="level2" data-number="10.10">
<h2 data-number="10.10" class="anchored" data-anchor-id="right-here-right-now"><span class="header-section-number">10.10</span> Right here, right now</h2>
<p>In R, dates are represented by Date objects, while times are represented by <code>POSIXct</code> objects. Under the hood, however, these dates and times are simple numerical values. Date objects store the number of days since the 1st of January in 1970. <code>POSIXct</code> objects on the other hand, store the number of seconds since the 1st of January in 1970.</p>
<p>The 1st of January in 1970 is the common origin for representing times and dates in a wide range of programming languages. There is no particular reason for this; it is a simple convention. Of course, it’s also possible to create dates and times before 1970; the corresponding numerical values are simply negative in this case.</p>
<section id="instructions-100-xp-8" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-8">Instructions 100 XP</h3>
<ul>
<li>Ask R for the current date, and store the result in a variable today.</li>
<li>To see what today looks like under the hood, call <code>unclass()</code> on it.</li>
<li>Ask R for the current time, and store the result in a variable, now.</li>
<li>To see the numerical value that corresponds to now, call <code>unclass()</code> on it.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_50.R</strong></pre>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the current date: today</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.date</span>()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># See what today looks like under the hood</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(today)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the current time: now</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>now <span class="ot">&lt;-</span>  <span class="fu">Sys.time</span>()</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># See what now looks like under the hood</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(now)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="create-and-format-dates" class="level2" data-number="10.11">
<h2 data-number="10.11" class="anchored" data-anchor-id="create-and-format-dates"><span class="header-section-number">10.11</span> Create and format dates</h2>
<p>To create a Date object from a simple character string in R, you can use the <code>as.Date()</code> function. The character string has to obey a format that can be defined using a set of symbols (the examples correspond to 13 January, 1982):</p>
<ul>
<li>%Y: 4-digit year (1982)</li>
<li>%y: 2-digit year (82)</li>
<li>%m: 2-digit month (01)</li>
<li>%d: 2-digit day of the month (13)</li>
<li>%A: weekday (Wednesday)</li>
<li>%a: abbreviated weekday (Wed)</li>
<li>%B: month (January)</li>
<li>%b: abbreviated month (Jan)</li>
</ul>
<p>The following R commands will all create the same Date object for the 13th day in January of 1982:</p>
<div class="sourceCode" id="cb10" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">"1982-01-13"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">"Jan-13-82"</span>, <span class="at">format =</span> <span class="st">"%b-%d-%y"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">"13 January, 1982"</span>, <span class="at">format =</span> <span class="st">"%d %B, %Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that the first line here did not need a format argument, because by default R matches your character string to the formats <code>"%Y-%m-%d"</code> or <code>"%Y/%m/%d"</code>.</p>
<p>In addition to creating dates, you can also convert dates to character strings that use a different date notation. For this, you use the <code>format()</code> function. Try the following lines of code:</p>
<p>today &lt;- Sys.Date() format(Sys.Date(), format = “%d %B, %Y”) format(Sys.Date(), format = “Today is a %A!”)</p>
<section id="instructions-100-xp-9" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-9">Instructions <code>100 XP</code></h3>
<ul>
<li><p>Three character strings representing dates have been created for you. Convert them to dates using as.Date(), and assign them to date1, date2, and date3 respectively. The code for date1 is already included.</p></li>
<li><p>Extract useful information from the dates as character strings using <code>format()</code>. From the first date, select the weekday. From the second date, select the day of the month. From the third date, you should select the abbreviated month and the 4-digit year, separated by a space.</p></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_51.R</strong></pre>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definition of character strings representing dates</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>str1 <span class="ot">&lt;-</span> <span class="st">"May 23, '96"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>str2 <span class="ot">&lt;-</span> <span class="st">"2012-03-15"</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>str3 <span class="ot">&lt;-</span> <span class="st">"30/January/2006"</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the strings to dates: date1, date2, date3</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>date1 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(str1, <span class="at">format =</span> <span class="st">"%b %d, '%y"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>date2 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(str2, <span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>date3 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(str3, <span class="at">format =</span> <span class="st">"%d/%B/%Y"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert dates to formatted strings</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(date1, <span class="st">"%A"</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(date2, <span class="st">"%d"</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(date3, <span class="st">"%b %Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="create-and-format-times" class="level2" data-number="10.12">
<h2 data-number="10.12" class="anchored" data-anchor-id="create-and-format-times"><span class="header-section-number">10.12</span> Create and format times</h2>
<p>Similar to working with dates, you can use <code>as.POSIXct()</code> to convert from a character string to a <code>POSIXct</code> object, and <code>format()</code> to convert from a <code>POSIXct</code> object to a character string. Again, you have a wide variety of symbols:</p>
<ul>
<li><code>%H</code>: hours as a decimal number (00-23)</li>
<li><code>%I</code>: hours as a decimal number (01-12)</li>
<li><code>%M</code>: minutes as a decimal number</li>
<li><code>%S</code>: seconds as a decimal number</li>
<li><code>%T</code>: shorthand notation for the typical format %H:%M:%S</li>
<li><code>%p</code>: AM/PM indicator</li>
</ul>
<p>For a full list of conversion symbols, consult the strptime documentation in the console:</p>
<div class="sourceCode" id="cb12" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>?strptime</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Again, <code>as.POSIXct()</code> uses a default format to match character strings. In this case, it’s <code>%Y-%m-%d %H:%M:%S.</code> In this exercise, abstraction is made of different time zones.</p>
<section id="instructions-100-xp-10" class="level3" data-number="10.12.1">
<h3 data-number="10.12.1" class="anchored" data-anchor-id="instructions-100-xp-10"><span class="header-section-number">10.12.1</span> Instructions <code>100 XP</code></h3>
<ul>
<li><p>Convert two strings that represent <code>timestamps</code>, <code>str1</code> and <code>str2</code>, to <code>POSIXct</code> objects called <code>time1</code> and <code>time2</code>.</p></li>
<li><p>Using <code>format()</code>, create a string from <code>time1</code> containing only the minutes.</p></li>
<li><p>From <code>time2</code>, extract the hours and minutes as <code>"hours:minutes AM/PM"</code>. Refer to the assignment text above to find the correct conversion symbols!</p></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_52.R</strong></pre>
</div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Definition of character strings representing times</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>str1 <span class="ot">&lt;-</span> <span class="st">"May 23, '96 hours:23 minutes:01 seconds:45"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>str2 <span class="ot">&lt;-</span> <span class="st">"2012-3-12 14:23:08"</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the strings to POSIXct objects: time1, time2</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>time1 <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(str1, <span class="at">format =</span> <span class="st">"%B %d, '%y hours:%H minutes:%M seconds:%S"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>time2 <span class="ot">&lt;-</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.POSIXct</span>(</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        str2, <span class="at">format =</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert times to formatted strings</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(time1, <span class="st">'%M'</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(time2, <span class="st">'%H:%M%p'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="calculations-with-dates" class="level2" data-number="10.13">
<h2 data-number="10.13" class="anchored" data-anchor-id="calculations-with-dates"><span class="header-section-number">10.13</span> Calculations with Dates</h2>
<p>Both Date and POSIXct R objects are represented by simple numerical values under the hood. This makes calculation with time and date objects very straightforward: R performs the calculations using the underlying numerical values, and then converts the result back to human-readable time information again.</p>
<p>You can increment and decrement Date objects, or do actual calculations with them:</p>
<div class="sourceCode" id="cb14" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>today <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>today <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">"2015-03-12"</span>) <span class="sc">-</span> <span class="fu">as.Date</span>(<span class="st">"2015-02-27"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To control your eating habits, you decided to write down the dates of the last five days that you ate pizza. In the workspace, these dates are defined as five Date objects, day1 to day5. A vector pizza containing these 5 Date objects has been pre-defined for you.</p>
<section id="instructions-100-xp-11" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-11">Instructions <code>100 XP</code></h3>
<ul>
<li>Calculate the number of days that passed between the last and the first day you ate pizza. Print the result.</li>
<li>Use the function <code>diff()</code> on pizza to calculate the differences between consecutive pizza days. Store the result in a new variable <code>day_diff</code>.</li>
<li>Calculate the average period between two consecutive pizza days. Print the result.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_053.R</strong></pre>
</div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># day1, day2, day3, day4 and day5 are already available in the </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># workspace Difference between last and first pizza day</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(day5 <span class="sc">-</span> day1)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create vector pizza</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>pizza <span class="ot">&lt;-</span> <span class="fu">c</span>(day1, day2, day3, day4, day5)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create differences between consecutive pizza days: day_diff</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>day_diff <span class="ot">&lt;-</span> <span class="fu">diff</span>(pizza)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Average period between two consecutive pizza days</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">mean</span>(day_diff))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="calculations-with-times" class="level2" data-number="10.14">
<h2 data-number="10.14" class="anchored" data-anchor-id="calculations-with-times"><span class="header-section-number">10.14</span> Calculations with Times</h2>
<p>Calculations using POSIXct objects are completely analogous to those using Date objects. Try to experiment with this code to increase or decrease POSIXct objects:</p>
<div class="sourceCode" id="cb16" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>now <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>now <span class="sc">+</span> <span class="dv">3600</span>          <span class="co"># add an hour</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>now <span class="sc">-</span> <span class="dv">3600</span> <span class="sc">*</span> <span class="dv">24</span>     <span class="co"># subtract a day</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Adding or subtracting time objects is also straightforward:</p>
<div class="sourceCode" id="cb17" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>birth <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"1879-03-14 14:37:23"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>death <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"1955-04-18 03:47:12"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>einstein <span class="ot">&lt;-</span> death <span class="sc">-</span> birth</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>einstein</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You’re developing a website that requires users to log in and out. You want to know what is the total and average amount of time a particular user spends on your website. This user has logged in 5 times and logged out 5 times as well. These times are gathered in the vectors login and logout, which are already defined in the workspace.</p>
<section id="instructions-100-xp-12" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-12">Instructions <code>100 XP</code></h3>
<ul>
<li>Calculate the difference between the two vectors logout and login, i.e.&nbsp;the time the user was online in each independent session. Store the result in a variable time_online.</li>
<li>Inspect the variable time_online by printing it.</li>
<li>Calculate the total time that the user was online. Print the result.</li>
<li>Calculate the average time the user was online. Print the result.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_054.R</strong></pre>
</div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># login and logout are already defined in the workspace</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the difference between login and logout: time_online</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>time_on_line <span class="ot">&lt;-</span> logout <span class="sc">-</span> login</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the variable time_online</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>time_on_line</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the total time online</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(time_on_line)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the average time online</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(time_on_line)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="time-is-of-the-essence" class="level2" data-number="10.15">
<h2 data-number="10.15" class="anchored" data-anchor-id="time-is-of-the-essence"><span class="header-section-number">10.15</span> Time is of the essence</h2>
<p>The dates when a season begins and ends can vary depending on who you ask. People in Australia will tell you that spring starts on September 1st. The Irish people in the Northern hemisphere will swear that spring starts on February 1st, with the celebration of St.&nbsp;Brigid’s Day. Then there’s also the difference between astronomical and meteorological seasons: while astronomers are used to equinoxes and solstices, meteorologists divide the year into 4 fixed seasons that are each three months long. (source: www.timeanddate.com)</p>
<p>A vector <code>astro</code>, which contains character strings representing the dates on which the 4 astronomical seasons start, has been defined on your workspace. Similarly, a vector <code>meteo</code> has already been created for you, with the meteorological beginnings of a season.</p>
<section id="instructions-100-xp-13" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="instructions-100-xp-13">Instructions <code>100 XP</code></h3>
<ul>
<li>Use <code>as.Date()</code> to convert the astro vector to a vector containing <code>Date</code> objects. You will need the <code>%d</code>, <code>%b</code> and <code>%Y</code> symbols to specify the format. Store the resulting vector as astro_dates.</li>
<li>Use <code>as.Date()</code> to convert the meteo vector to a vector with Date objects. This time, you will need the <code>%B</code>, <code>%d</code> and <code>%y</code> symbols for the format argument. Store the resulting vector as<code>meteo_dates</code>.</li>
<li>With a combination of <code>max()</code>, <code>abs()</code> and <code>-</code>, calculate the maximum absolute difference between the astronomical and the meteorological beginnings of a season, i.e.&nbsp;<code>astro_dates</code> and <code>meteo_dates</code>. Simply print this maximum difference to the console output.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>ex_055.R</strong></pre>
</div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert astro to vector of Date objects: astro_dates</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>astro_dates <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(astro, <span class="st">"%d-%b-%Y"</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert meteo to vector of Date objects: meteo_dates</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>meteo_dates <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(meteo, <span class="at">format =</span> <span class="st">"%B %d, %y"</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the maximum absolute difference between astro_dates and meteo_dates</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(<span class="fu">abs</span>(astro_dates <span class="sc">-</span> meteo_dates))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./_intermediate_r_04.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The apply family</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data_visualization.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data visualization with ggplot2 and friends</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<pre class="markdown" data-shortcodes="false"><code># Utilities

Mastering R programming is not only about understanding its programming 
concepts. Having a solid understanding of a wide range of R functions is also 
important. This chapter introduces you to many useful functions for data 
structure manipulation, regular expressions, and working with times and dates.

## Mathematical utilities
Have another look at some useful math functions that R features:

- `abs()`: Calculate the absolute value.
- `sum()`: Calculate the sum of all the values in a data structure.
- `mean()`: Calculate the arithmetic mean.
- `round()`: Round the values to 0 decimal places by default. Try out ?round in 
the console for variations of `round()` and ways to change the number of digits 
to round to.

As a data scientist in training, you've estimated a regression model on the 
sales data for the past six months. After evaluating your model, you see that 
the training error of your model is quite regular, showing both positive and 
negative values. A vector `errors` containing the error values has been 
pre-defined for you.

### Instructions `100 XP` {.unnumbered}

Calculate the sum of the absolute rounded values of the training errors. 
You can work in parts, or with a single one-liner. There's no need to store the 
result in a variable, just have R print it.

 ```{.r filename=ex_043.R}
 # The errors vector has already been defined for you
errors &lt;- c(1.9, -2.6, 4.0, -9.5, -3.4, 7.3)

# Sum of absolute rounded values of errors
sum(abs(round(errors)))
```
## Find the error

We went ahead and pre-loaded some code for you, but there's still an error. Can
you trace it and fix it?

In times of despair, help with functions such as sum() and rev() are a single 
command away; simply execute the code ?sum and ?rev.

### Instructions `100 XP` {.unnumbered}

Fix the error by including code on the last line. Remember: you want to call 
`mean()` only once!

```{.r filename="ex_044.R"}
# Don't edit these two lines
vec1 &lt;- c(1.5, 2.5, 8.4, 3.7, 6.3)
vec2 &lt;- rev(vec1)

# Fix the error
mean(abs(vec1))
```
## Data Utilities

R features a bunch of functions to juggle around with data structures::

- seq(): Generate sequences, by specifying the from, to, and by arguments.
- rep(): Replicate elements of vectors and lists.
- sort(): Sort a vector in ascending order. Works on numerics, but also on character strings and logicals.
- rev(): Reverse the elements in a data structures for which reversal is defined.
- str(): Display the structure of any R object.
- append(): Merge vectors or lists.
- is.*(): Check for the class of an R object.
- as.*(): Convert an R object from one class to another.
- unlist(): Flatten (possibly embedded) lists to produce a vector.

Remember the social media profile views data? Your LinkedIn and Facebook view 
counts for the last seven days have been pre-defined as lists.

### Instructions `100 XP` {.unnumbered}

- Convert both linkedin and facebook lists to a vector, and store them as 
`li_vec` and fb_vec respectively.
- Next, append fb_vec to the li_vec (Facebook data comes last). Save the result 
as social_vec.
- Finally, sort social_vec from high to low. Print the resulting vector.

```{.r filename="ex_045.R"}
# The linkedin and facebook lists have already been created for you
linkedin &lt;- list(16, 9, 13, 5, 2, 17, 14)
facebook &lt;- list(17, 7, 5, 16, 8, 13, 14)

# Convert linkedin and facebook to a vector: li_vec and fb_vec
li_vec &lt;- unlist(linkedin)
fb_vec &lt;- unlist(facebook)

# Append fb_vec to li_vec: social_vec
social_vec &lt;- append(li_vec, fb_vec)

# Sort social_vec
print(sort(social_vec, decreasing=TRUE))

```
## Find the error (2)

Just as before, let's switch roles. It's up to you to see what unforgivable 
mistakes we've made. Go fix them!

### Instructions `100 XP` {.unnumbered}

Correct the expression. Make sure that your fix still uses the functions
`rep()` and `seq()`.

```{.r filename="ex_046.R"}
# Fix me
rep(seq(1, 7, by = 2), times = 7)
```

## Beat Gauss using R
There is a popular story about young Gauss. As a pupil, he had a lazy teacher 
who wanted to keep the classroom busy by having them add up the numbers 
1 to 100. Gauss came up with an answer almost instantaneously, 5050. 
On the spot, he had developed a formula for calculating the sum of an arithmetic
series. There are more general formulas for calculating the sum of an arithmetic
series with different starting values and increments. Instead of deriving such
a formula, why not use R to calculate the sum of a sequence?

### Instructions `100 XP` {.unnumbered}

- Using the function `seq()`, create a sequence that ranges from 1 to 500 in 
increments of 3. Assign the resulting vector to a variable `seq1`.
- Again with the function `seq()`, create a sequence that ranges from 1200 to 
900 in increments of -7. Assign it to a variable `seq2`.
- Calculate the total sum of the sequences, either by using the `sum()` function
twice and adding the two results, or by first concatenating the sequences and
then using the `sum()` function once. Print the result to the console.

```{.r filename="ex_047.R"}
# Create first sequence: seq1
seq1 &lt;- seq(1, 500, by = 3)

# Create second sequence: seq2
seq2 &lt;- seq(1200, 900, by = -7)

# Calculate total sum of the sequences
print(sum(seq1) + sum(seq2))
```
## grepl &amp; grep
In their most basic form, regular expressions can be used to see whether a 
pattern exists inside a character string or a vector of character strings. For 
this purpose, you can use:

`grepl()`, which returns `TRUE` when a pattern is found in the corresponding 
character string.
`grep()`, which returns a vector of indices of the character strings that 
contains the pattern.
Both functions need a pattern and an `x` argument, where pattern is the regular
expression you want to match for, and the `x` argument is the character vector
from which matches should be sought.

In this and the following exercises, you'll be querying and manipulating a 
character vector of email addresses! The vector emails has been pre-defined so
 you can begin with the instructions straight away!

### Instructions `100 XP` {.unnumbered}

- Use `grepl()` to generate a vector of logicals that indicates whether these 
email addresses contain `"edu"`. Print the result to the output.
- Do the same thing with `grep()`, but this time save the resulting indexes in a 
variable hits.
- Use the variable hits to select from the emails vector only the emails that 
contain `"edu"`.

```{.r filename="ex_48.R"}
# The emails vector has already been defined for you
emails &lt;- 
    c(
        "john.doe@ivyleague.edu",
        "education@world.gov",
        "dalai.lama@peace.org",
        "invalid.edu",
        "quant@bigdatacollege.edu",
        "cookie.monster@sesame.tv"
    )

# Use grepl() to match for "edu"
print(grepl('edu', emails))

# Use grep() to match for "edu", save result to hits
hits &lt;- grep('edu', emails)

# Subset emails using hits
emails[hits]
```
## grepl &amp; grep (2)

You can use the caret, ^, and the dollar sign, $ to match the content located 
in the start and end of a string, respectively. This could take us one step
closer to a correct pattern for matching only the ".edu" email addresses from
our list of emails. But there's more that can be added to make the pattern more
robust:

- @, because a valid email must contain an at-sign.
- .* , which matches any character (.) zero or more times (*). Both the dot and 
the asterisk are metacharacters. You can use them to match any character 
between the at-sign and the ".edu" portion of an email address.
- `\\.edu$`, to match the ".edu" part of the email at the end of the string. 
The `\\` part escapes the dot: it tells R that you want to use the `.` as an 
actual character.

### Instructions `100 XP` {.unnumbered}

- Use `grepl()` with the more advanced regular expression to return a logical 
vector. Simply print the result.
- Do a similar thing with `grep()` to create a vector of indices. 
Store the result in the variable `hits`.
- Use `emails[hits]` again to subset the `emails` vector.

```{.r filename="ex_049.R"}
# The emails vector has already been defined for you
emails &lt;- c(
    "john.doe@ivyleague.edu",
    "education@world.gov",
    "dalai.lama@peace.org",
    "invalid.edu",
    "quant@bigdatacollege.edu",
    "cookie.monster@sesame.tv"
)
grepl("@.*\\.edu$", emails)
hits &lt;- grep("@.*\\.edu$", emails)
emails[hits]
```
## sub &amp; gsub

While grep() and grepl() were used to simply check whether a regular expression 
could be matched with a character vector, `sub()` and `gsub()` take it one step 
further: you can specify a replacement argument. If inside the character vector 
`x`, the regular expression pattern is found, the matching element(s) will be 
replaced with replacement. `sub()` only replaces the first match, 
whereas `gsub()` replaces all matches.

Suppose that emails vector you've been working with is an excerpt of DataCamp's
email database. Why not offer the owners of the `.edu` email addresses a new 
email address on the `datacamp.edu` domain? This could be quite a powerful 
marketing stunt: Online education is taking over traditional learning 
institutions! Convert your email and be a part of the new generation!

### Instructions `100 XP` {.unnumbered}
With the advanced regular expression `"@.*\\.edu$"`, use `sub()` to replace the 
match with `"@datacamp.edu"`. Since there will only be one match per character 
string, `gsub()` is not necessary here. Inspect the resulting output.

```{.r filename="ex_050.R"}
# The emails vector has already been defined for you
emails &lt;- c(
    "john.doe@ivyleague.edu",
    "education@world.gov",
    "global@peace.org",
    "invalid.edu",
    "quant@bigdatacollege.edu",
    "cookie.monster@sesame.tv"
)

# Use sub() to convert the email domains to datacamp.edu
sub("@.*\\.edu$", "@datacamp.edu", emails)
``` 
## sub &amp; gsub (2)
Regular expressions are a typical concept that you'll learn by doing and by 
seeing other examples. Before you rack your brains over the regular expression 
in this exercise, have a look at the new things that will be used:

- .*: A usual suspect! It can be read as "any character that is matched zero or 
more times".
- \\s: Match a space. The "s" is normally a character, escaping it (\\) makes it 
a metacharacter.
- [0-9]+: Match the numbers 0 to 9, at least once (+).
- ([0-9]+): The parentheses are used to make parts of the matching string
available to define the replacement. The \\1 in the replacement argument of 
`sub()` 
gets set to the string that is captured by the regular expression [0-9]+.
```{. r code-line-numbers="false"}
awards &lt;- c(
    "Won 1 Oscar.",
    "Won 1 Oscar. Another 9 wins &amp; 24 nominations.",
    "1 win and 2 nominations.",
    "2 wins &amp; 3 nominations.",
    "Nominated for 2 Golden Globes. 1 more win &amp; 2 nominations.",
    "4 wins &amp; 1 nomination."
)
sub(".*\\s([0-9]+)\\snomination.*$", "\\1", awards)
```
What does this code chunk return? awards is already defined in the workspace so
you can start playing in the console straight away.

### Instructions `50 XP` {.unnumbered}
Possible Answers

- A vector of integers containing: `1, 24, 2, 3, 2, 1`.
- The vector awards gets returned as there isn't a single element in awards that
matches the regular expression.
- A vector of character strings containing `"1", "24", "2", "3", "2", "1".`
- A vector of character strings containing `"Won 1 Oscar.",`
`"24", "2", "3", "2", "1"`.

## Right here, right now

In R, dates are represented by Date objects, while times are represented by 
`POSIXct` objects. Under the hood, however, these dates and times are simple 
numerical values. Date objects store the number of days since the 1st of January 
in 1970. `POSIXct` objects on the other hand, store the number of seconds since
the 1st of January in 1970.

The 1st of January in 1970 is the common origin for representing times and dates 
in a wide range of programming languages. There is no particular reason for 
this; it is a simple convention. Of course, it's also possible to create dates 
and times before 1970; the corresponding numerical values are simply negative in 
this case.

### Instructions 100 XP {.unnumbered}

- Ask R for the current date, and store the result in a variable today.
- To see what today looks like under the hood, call `unclass()` on it.
- Ask R for the current time, and store the result in a variable, now.
- To see the numerical value that corresponds to now, call `unclass()` on it.

```{.r filename="ex_50.R"}
# Get the current date: today
today &lt;- Sys.date()
# See what today looks like under the hood
unclass(today)
# Get the current time: now
now &lt;-  Sys.time()
# See what now looks like under the hood
unclass(now)
```
## Create and format dates

To create a Date object from a simple character string in R, you can use the
`as.Date()` function. The character string has to obey a format that can be 
defined using a set of symbols (the examples correspond to 13 January, 1982):

- %Y: 4-digit year (1982)
- %y: 2-digit year (82)
- %m: 2-digit month (01)
- %d: 2-digit day of the month (13)
- %A: weekday (Wednesday)
- %a: abbreviated weekday (Wed)
- %B: month (January)
- %b: abbreviated month (Jan)

The following R commands will all create the same Date object for the 13th 
day in January of 1982:

```{.r code-line-numbers="false"}
as.Date("1982-01-13")
as.Date("Jan-13-82", format = "%b-%d-%y")
as.Date("13 January, 1982", format = "%d %B, %Y")
```

Notice that the first line here did not need a format argument, because by
default R matches your character string to the formats 
`"%Y-%m-%d"` or `"%Y/%m/%d"`.

In addition to creating dates, you can also convert dates to character strings 
that use a different date notation. For this, you use the `format()` function. 
Try the following lines of code:

today &lt;- Sys.Date()
format(Sys.Date(), format = "%d %B, %Y")
format(Sys.Date(), format = "Today is a %A!")

### Instructions `100 XP` {.unnumbered}

- Three character strings representing dates have been created for you. Convert 
them to dates using as.Date(), and assign them to date1, date2, and date3 
respectively. The code for date1 is already included.

- Extract useful information from the dates as character strings using 
`format()`. From the first date, select the weekday. From the second date, 
select the day of the month. From the third date, you should select the 
abbreviated month and the 4-digit year, separated by a space.

```{.r filename="ex_51.R"}
# Definition of character strings representing dates
str1 &lt;- "May 23, '96"
str2 &lt;- "2012-03-15"
str3 &lt;- "30/January/2006"

# Convert the strings to dates: date1, date2, date3
date1 &lt;- as.Date(str1, format = "%b %d, '%y")
date2 &lt;- as.Date(str2, format = "%Y-%m-%d")
date3 &lt;- as.Date(str3, format = "%d/%B/%Y")

# Convert dates to formatted strings
format(date1, "%A")
format(date2, "%d")
format(date3, "%b %Y")
```

## Create and format times


Similar to working with dates, you can use `as.POSIXct()` to convert from a 
character string to a `POSIXct` object, and `format()` to convert from a 
`POSIXct` object to a character string. Again, you have a wide variety of 
symbols:

- `%H`: hours as a decimal number (00-23)
- `%I`: hours as a decimal number (01-12)
- `%M`: minutes as a decimal number
- `%S`: seconds as a decimal number
- `%T`: shorthand notation for the typical format %H:%M:%S
- `%p`: AM/PM indicator

For a full list of conversion symbols, consult the strptime documentation in the 
console:

```{.r code-line-numbers="false"}
?strptime
```

Again, `as.POSIXct()` uses a default format to match character strings. In this
case, it's `%Y-%m-%d %H:%M:%S.` In this exercise, abstraction is made of 
different time zones.

### Instructions `100 XP`

- Convert two strings that represent 
`timestamps`, `str1` and `str2`, to `POSIXct` objects called 
`time1` and `time2`.

- Using `format()`, create a string from `time1` containing only the minutes.

- From `time2`, extract the hours and minutes as `"hours:minutes AM/PM"`.
Refer to the assignment text above to find the correct conversion symbols!

```{.r filename="ex_52.R"}
    # Definition of character strings representing times
str1 &lt;- "May 23, '96 hours:23 minutes:01 seconds:45"
str2 &lt;- "2012-3-12 14:23:08"
# Convert the strings to POSIXct objects: time1, time2
time1 &lt;- as.POSIXct(str1, format = "%B %d, '%y hours:%H minutes:%M seconds:%S")

time2 &lt;- 
    as.POSIXct(
        str2, format = "%Y-%m-%d %H:%M:%S")

# Convert times to formatted strings
format(time1, '%M')
format(time2, '%H:%M%p')
```

## Calculations with Dates

Both Date and POSIXct R objects are represented by simple numerical values 
under the hood. This makes calculation with time and date objects very 
straightforward: R performs the calculations using the underlying numerical
values, and then converts the result back to human-readable time information 
again.

You can increment and decrement Date objects, or do actual calculations with 
them:

```{.r code-line-numbers="false"}
today &lt;- Sys.Date()
today + 1
today - 1
as.Date("2015-03-12") - as.Date("2015-02-27")
```


To control your eating habits, you decided to write down the dates of the last 
five days that you ate pizza. In the workspace, these dates are defined as five 
Date objects, day1 to day5. A vector pizza containing these 5 Date objects has 
been pre-defined for you.

### Instructions `100 XP` {.unnumbered}

- Calculate the number of days that passed between the last and the first day 
you ate pizza. Print the result. 
- Use the function `diff()` on pizza to calculate the
differences between consecutive pizza days. Store the result in a new variable
`day_diff`.
- Calculate the average period between two consecutive pizza days. Print the 
result.

```{.r filename="ex_053.R"}
# day1, day2, day3, day4 and day5 are already available in the 
# workspace Difference between last and first pizza day
print(day5 - day1)
# Create vector pizza
pizza &lt;- c(day1, day2, day3, day4, day5)
# Create differences between consecutive pizza days: day_diff
day_diff &lt;- diff(pizza)
# Average period between two consecutive pizza days
print(mean(day_diff))
```
## Calculations with Times

Calculations using POSIXct objects are completely analogous to those using Date 
objects. Try to experiment with this code to increase or decrease POSIXct 
objects:

```{.r code-line-numbers="false"}
now &lt;- Sys.time()
now + 3600          # add an hour
now - 3600 * 24     # subtract a day
```
Adding or subtracting time objects is also straightforward:

```{.r code-line-numbers="false"}
birth &lt;- as.POSIXct("1879-03-14 14:37:23")
death &lt;- as.POSIXct("1955-04-18 03:47:12")
einstein &lt;- death - birth
einstein
```

You're developing a website that requires users to log in and out. You want to 
know what is the total and average amount of time a particular user spends on 
your website. This user has logged in 5 times and logged out 5 times as well. 
These times are gathered in the vectors login and logout, which are already 
defined in the workspace.

### Instructions `100 XP` {.unnumbered}

- Calculate the difference between the two vectors logout and login, i.e. the 
time the user was online in each independent session. Store the result in a 
variable time_online.
- Inspect the variable time_online by printing it.
- Calculate the total time that the user was online. Print the result.
- Calculate the average time the user was online. Print the result.

```{.r filename="ex_054.R"}
# login and logout are already defined in the workspace
# Calculate the difference between login and logout: time_online

time_on_line &lt;- logout - login

# Inspect the variable time_online
time_on_line

# Calculate the total time online
sum(time_on_line)

# Calculate the average time online
mean(time_on_line)
```

## Time is of the essence

The dates when a season begins and ends can vary depending on who you ask.
People in Australia will tell you that spring starts on September 1st. The Irish
people in the Northern hemisphere will swear that spring starts on February 1st,
with the celebration of St. Brigid's Day. Then there's also the difference
between astronomical and meteorological seasons: while astronomers are used
to equinoxes and solstices, meteorologists divide the year into 4 fixed seasons
that are each three months long. (source: www.timeanddate.com)

A vector `astro`, which contains character strings representing the dates on 
which the 4 astronomical seasons start, has been defined on your workspace. 
Similarly, a vector `meteo` has already been created for you, with the 
meteorological beginnings of a season.

### Instructions `100 XP` {.unnumbered}

- Use `as.Date()` to convert the astro vector to a vector containing `Date` 
objects. You will need the `%d`, `%b` and `%Y` symbols to specify the format. 
Store the resulting vector as astro_dates.
- Use `as.Date()` to convert the meteo vector to a vector with Date objects. 
This time, you will need the `%B`, `%d` and `%y` symbols for the format 
argument. Store the resulting vector as` meteo_dates`.
- With a combination of `max()`, `abs()` and `-`, calculate the maximum absolute 
difference between the astronomical and the meteorological beginnings of
a season, i.e. `astro_dates` and `meteo_dates`. Simply print this maximum 
difference to the console output.

```{.r filename="ex_055.R"}
# Convert astro to vector of Date objects: astro_dates

astro_dates &lt;- as.Date(astro, "%d-%b-%Y")
# Convert meteo to vector of Date objects: meteo_dates
meteo_dates &lt;- as.Date(meteo, format = "%B %d, %y")

# Calculate the maximum absolute difference between astro_dates and meteo_dates
max(abs(astro_dates - meteo_dates))
```</code></pre>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>